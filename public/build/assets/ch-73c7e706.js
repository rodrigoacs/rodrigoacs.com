const S=document.getElementById("previousDate"),x=document.getElementById("nextDate"),v=document.getElementById("currentDate"),d=document.getElementById("add");document.getElementById("calculate");const p=document.getElementById("result");let c=new Date,g=0;v.innerText=D(c);S.addEventListener("click",()=>h(-1));x.addEventListener("click",()=>h(1));d.addEventListener("click",$);setInterval(k,500);function h(t){c.setDate(c.getDate()+t),v.innerText=D(c)}function D(t){return`${t.getDate()}/${t.getMonth()+1}/${t.getFullYear()}`}function B(t,n){const e=new Date;return t=f(e,t),n=f(e,n),(n-t)/6e4}function f(t,n){const[e,a]=n.split(":");return new Date(t.getFullYear(),t.getMonth(),t.getDate(),e,a).getTime()}function k(){const t=document.querySelectorAll(".interval");let n=0;for(const o of t){const s=o.children[1].value,l=o.children[2].value,E=o.children[4];if(s&&l){const u=B(s,l);n+=u;const m=T(u),y=m[0].toString().padStart(2,"0"),I=m[1].toString().padStart(2,"0");E.value=`${y}:${I}`}}if(n===g)return;g=n;const e=T(n);if(console.log(e),e[0]<0||e[1]<0)return d.disabled=!0,p.innerText="horas inválidas";d.disabled=!1;const a=e[0].toString().padStart(2,"0"),i=e[1].toString().padStart(2,"0");p.innerText=`${a}:${i}`}function T(t){const n=parseInt(t/60),e=t-n*60;return[n,e]}function $(){const t=document.createElement("div");t.classList.add("interval");const n=r("time"),e=r("time"),a=r("text"),i=r("time",!0),o=document.createElement("button");o.innerText="✖",o.classList.add("delete"),o.addEventListener("click",()=>t.remove()),t.appendChild(o),t.appendChild(n),t.appendChild(e),t.appendChild(a),t.appendChild(i),document.body.appendChild(t)}function r(t,n=!1){const e=document.createElement("input");return e.type=t,n&&(e.readOnly=!0),e}
